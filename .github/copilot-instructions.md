# Copilot Coding Agent Instructions

## Repository Overview

This is a monorepo for Timothy Genz's professional portfolio website. It's a Vue.js-based single-page application designed to showcase projects, skills, and contact information.

**Primary Language**: TypeScript  
**Framework**: Vue 3 with Composition API  
**Build Tool**: Vite  
**Package Manager**: npm
**Node Version**: 24.x (tested with v24.13.0)  
**Testing**: Vitest with @testing-library/vue  
**Containerization**: Docker with Nginx

### Repository Structure

```
├── src/                 # Application source code
├── public/              # Static assets
├── dist/        # Build output (gitignored)
├── .github/
│   └── workflows/       # CI/CD pipelines
│       ├── ci.yml       # Main CI pipeline
│       └── semgrep.yml  # Security scanning
└── .husky/              # Git hooks (pre-commit)
```

## Build and Validation Commands

**CRITICAL**: Always run `npm install` before any build/test commands in a fresh environment.

### Installation

```bash
npm install
```

**Note**: This repository uses a single npm package (no workspaces). The `package-lock.json` file is generated by npm and should be committed.

### Development

```bash
# Start dev server (from repo root):
npm run dev
```

The dev server runs on `http://localhost:5173` (Vite default, not 3000 as stated in apps/client/README.md).

### Build

```bash
npm run build
```

Build output is in `apps/client/dist/`. Build typically takes 3-5 seconds.

### Linting

```bash
npm run lint   # Run ESLint
```

**Configuration**: ESLint uses flat config format in `eslint.config.js`. Shared presets are in `packages/config/eslint-preset.js`.

### Testing

```bash
npm run test:unit        # Unit tests
```

**IMPORTANT**: The default test command uses `--changed` flag which only runs tests for changed files. In a fresh clone with no git changes, this will show "No test files found" and exit successfully. This is expected behavior.

**To run all tests** (when needed for validation):

```bash
npm run test
```

**Note**: Running tests directly with `vitest run` may hang if no files have changed. Use the workspace test command at the root level instead.

**Test Location**: All tests are co-located with source files using `.spec.ts` extension (13 test files total).

### Formatting

```bash
npm run format           # Auto-fix formatting with Prettier
npm run format:check     # Check formatting without fixing
```

**Note**: Auto-generated files may show formatting warnings; ignore generated lock/build artifacts.

### Pre-commit Hooks

```bash
npm run prepare       # Install Husky hooks
```

**Automatic on commit**: `lint-staged` runs automatically via Husky pre-commit hook. It will:

1. Format changed files with Prettier
2. Lint changed files in `apps/client` with ESLint
3. Run related tests for changed test files

## CI/CD Pipeline

All PRs and pushes to `main` trigger the CI pipeline (`.github/workflows/ci.yml`).

**Jobs run in parallel** (after install):

1. **lint** - Runs `npm run lint`
2. **format-check** - Runs `npm run format` (note: runs format, not format:check)
3. **test** - Runs `npm run test:unit`
4. **build** - Runs `npm run build`

**Additional Pipeline**:

- **Semgrep** - Security scanning runs on PRs and pushes to main

**Runtime**: Node 24.x with dependency caching via GitHub Actions cache.

**Before pushing changes**: Always ensure `npm run lint`, `npm run test`, and `npm run build` pass locally to avoid CI failures.

## Project Architecture

### Client Application (`apps/client`)

**Framework**: Vue 3 with `<script setup>` Composition API  
**Router**: Vue Router 4  
**Styling**: Scoped CSS with base styles in `src/assets/`

**Key Directories**:

- `src/components/` - Reusable Vue components
  - `layout/` - AppHeader, AppFooter
  - `sections/` - Page sections (Hero, About, Projects, Contact, Showcase)
  - `icons/` - Icon components
- `src/composables/` - Reusable composition functions (useProjects, useShowcase, useContactLinks, useStatuses)
- `src/views/` - Page-level components (currently just HomeView)
- `src/router/` - Vue Router configuration
- `src/assets/` - Global CSS and images

### Code Conventions

Follow the guidelines in `GEMINI.md`:

- **Components**: PascalCase (e.g., `MyComponent.vue`)
- **Variables/Functions**: camelCase
- **Composables**: camelCase with `use` prefix
- **Booleans**: Use `is`, `has`, `should` prefixes
- **Constants**: SCREAMING_SNAKE_CASE

**Vue Component Structure** (in order):

1. Imports
2. Props & Emits
3. Reactive State (refs, reactives)
4. Composables
5. Computed Properties
6. Watchers
7. Lifecycle Hooks
8. Methods

**Comments**: Explain "why" not "what". Avoid obvious or conversational comments.

## Common Issues and Workarounds

### Running Scripts

Run scripts with `npm run <script>` from the repository root, or change into `apps/client` and run `npm run <script>` there.

For example:

```bash
npm run test:unit
```

## Validation Checklist

Before finalizing changes:

1. ✅ Run `npm install`
2. ✅ Run `npm run lint` (must pass with no errors)
3. ✅ Run `npm run test` (should pass or show no files if no changes)
4. ✅ Run `npm run build` (must succeed)
5. ✅ Verify no unintended file changes
6. ✅ If adding dependencies, update both package.json and run install

## Trust These Instructions

These instructions have been validated by running all commands in a fresh clone. Only perform additional exploration if:

- The instructions are incomplete for your specific task
- You encounter errors not documented here
- The codebase structure has changed significantly

For most tasks, following these instructions will prevent common build and validation failures.
